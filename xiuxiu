<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="jquery-3.2.1.min.js"></script>
    <script src="https://cdn.bootcss.com/angular.js/1.6.3/angular.min.js"></script>
    <style>
        body {
            background-color: #cccccc;
        }

        #content {
            width: 1000px;
            margin: 50px auto;
            background-color: #f7f7f7;
        }

        .state {
            height: 100px;
            width: 1000px;
            background-color: lightslategray;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;

            color: #000000;

        }

        li {
            list-style: none;
            line-height: 50px;;
            font-size: medium;
        }

        .container {
            height: 500px;
            overflow: scroll;
            width: 1000px;;
        }


    </style>
</head>
<body>

<div ng-app="myApp" ng-controller="siteCtrl" id="content">


    <div class="state">
        <ul>
            <li>
                rescode:{{resCode1}}
            </li>
            <li>
                resMsg: {{resMsgval}}
            </li>
        </ul>


    </div>

    <div class="container">
        <div style="width: 1000px;" class="table-responsive">
            <table class="table">
                <thead>
                <tr>
                    <th>id</th>
                    <th>name</th>
                    <th>url</th>
                    <th>version</th>
                    <th>starTime</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="x in datas">
                    <td>{{x.id}}</td>
                    <td>{{x.name}}</td>
                    <td>{{x.url}}</td>
                    <td>{{x.version}}</td>
                    <td>{{x.startTime}}</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!--<ul>
            <li ng-repeat="x in names">
                {{ x.id + ', ' + x.ipAddress}}
            </li>
        </ul>
    -->
    </div>

    <script>
        var app = angular.module('myApp', []);

        app.controller('siteCtrl', function ($scope, $http,$interval) {
            http();
            var timer=$interval(function(){
                http();
            },2000);

            function http(){
                $http({
                    method: 'GET',
                    url: 'http://10.136.104.56:21113/u-route/baas/cluster/v1.0/nodes'
                }).then(function successCallback(response) {
                    $scope.datas = response.data.result;
                    $scope.resMsgval = response.data.resMsg;
                    $scope.resCode1 = response.data.resCode;
                }, function errorCallback(response) {
                    // 请求失败执行代码

                });
            }
        });


    </script>

</body>
</html>
